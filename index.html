<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perfect Cache</title>
  </head>
  <body>
    <script src="./dist/perfect-cache.umd.js"></script>
    <script>
      (async () => {
        const PerfectCacheInstance = new PerfectCache.PerfectCache({
          driver: "cookie",
        });
        window.console.log(PerfectCacheInstance);
        const result1 = await PerfectCacheInstance.setItem(
          "key1",
          { a: 1, b: 2 },
          { expiredTime: 2000, setOnlyNotExist: true }
        );
        window.console.log(result1, await PerfectCacheInstance.getItem("key1"));
        const result2 = await PerfectCacheInstance.setItem(
          "key1",
          { a: 3, b: 4 },
          { expiredTime: 2000, setOnlyExist: true }
        );
        window.console.log(result2, await PerfectCacheInstance.getItem("key1"));
        const PerfectCacheAsyncInstance = new PerfectCache.PerfectCache({
          driver: "indexedDB",
        });
        PerfectCacheAsyncInstance.$on("ready", () => {
          window.console.log("indexedDB ready.");
          PerfectCacheAsyncInstance.getItem("key1").then((value) => {
            window.console.log("key1 get success", value);
            PerfectCacheAsyncInstance.setItem("key1", {
              a: 3,
              b: 2,
              c: 1,
            }).then(() => {
              window.console.log("key1 set success");
            });
          });
        });
      })();
    </script>
  </body>
</html>
